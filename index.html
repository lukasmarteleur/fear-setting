<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fear Setting - Define, Prevent, Repair</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background-color: #f8f6f3;
            color: #2c2c2c;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px 20px;
            background-color: #fff;
            border-bottom: 3px solid #333;
        }

        h1 {
            font-size: 3em;
            font-weight: 300;
            letter-spacing: -1px;
            margin-bottom: 10px;
            color: #1a1a1a;
        }

        .subtitle {
            font-size: 1.2em;
            color: #666;
            font-style: italic;
        }

        .intro {
            background-color: #fff;
            padding: 40px;
            margin-bottom: 40px;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .intro h2 {
            font-size: 2em;
            margin-bottom: 20px;
            color: #1a1a1a;
            font-weight: 400;
        }

        .intro p {
            margin-bottom: 15px;
            font-size: 1.1em;
            line-height: 1.8;
        }

        .intro strong {
            color: #333;
        }

        .what-if-section {
            background-color: #fff;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid #333;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .what-if-section h2 {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: #1a1a1a;
            font-weight: 400;
        }

        .what-if-input {
            width: 100%;
            font-size: 1.3em;
            padding: 15px;
            border: 1px solid #ddd;
            font-family: 'Georgia', serif;
            background-color: #fafafa;
            color: #333;
        }

        .what-if-input:focus {
            outline: none;
            border-color: #333;
            background-color: #fff;
        }

        .columns-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
            position: relative;
        }

        @media (max-width: 768px) {
            .columns-container {
                grid-template-columns: 1fr;
            }
        }

        .column {
            background-color: #fff;
            border: 1px solid #e0e0e0;
            padding: 20px;
            min-height: 400px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .column h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #333;
            font-weight: 400;
        }

        .column-subtitle {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 20px;
            font-style: italic;
        }

        .editor {
            min-height: 300px;
            outline: none;
            font-size: 1em;
            line-height: 1.8;
            list-style: none;
            counter-reset: item;
        }

        .editor li {
            margin-bottom: 10px;
            margin-left: 0;
            padding: 8px 12px 8px 35px;
            border-radius: 4px;
            transition: background-color 0.2s;
            position: relative;
            counter-increment: item;
            min-height: 36px;
            display: list-item;
        }
        
        .editor li:empty {
            min-height: 36px;
        }
        
        .editor li:empty:after {
            content: '\00a0';
        }

        .editor li:before {
            content: counter(item) ".";
            position: absolute;
            left: 12px;
            font-weight: bold;
            color: #666;
        }

        .editor li:hover {
            background-color: #f5f5f5;
        }

        .editor li.aligned-1 { background-color: rgba(200, 200, 220, 0.2); }
        .editor li.aligned-2 { background-color: rgba(180, 200, 230, 0.2); }
        .editor li.aligned-3 { background-color: rgba(200, 180, 230, 0.2); }
        .editor li.aligned-4 { background-color: rgba(230, 200, 180, 0.2); }
        .editor li.aligned-5 { background-color: rgba(210, 190, 220, 0.2); }
        .editor li.aligned-6 { background-color: rgba(190, 210, 220, 0.2); }
        .editor li.aligned-7 { background-color: rgba(220, 210, 190, 0.2); }
        .editor li.aligned-8 { background-color: rgba(205, 195, 215, 0.2); }
        .editor li.aligned-9 { background-color: rgba(195, 205, 215, 0.2); }
        .editor li.aligned-10 { background-color: rgba(215, 205, 195, 0.2); }

        .editor:empty:before {
            content: 'Click to add your first item...';
            color: #999;
            font-style: italic;
            padding-left: 35px;
        }

        .export-section {
            text-align: center;
            padding: 40px;
            background-color: #fff;
            border: 1px solid #e0e0e0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .export-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .export-btn {
            padding: 12px 30px;
            background-color: #333;
            color: #fff;
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-family: 'Georgia', serif;
            transition: background-color 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .export-btn:hover {
            background-color: #555;
        }

        .reset-btn {
            padding: 12px 30px;
            background-color: #8b0000;
            color: #fff;
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-family: 'Georgia', serif;
            transition: background-color 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .reset-btn:hover {
            background-color: #a00000;
        }

        .instructions {
            background-color: #f0ebe5;
            padding: 30px;
            margin-top: 40px;
            border-left: 4px solid #333;
        }

        .instructions h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
            font-weight: 400;
        }

        .instructions ol {
            margin-left: 30px;
        }

        .instructions li {
            margin-bottom: 15px;
            font-size: 1.05em;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Fear Setting</h1>
            <p class="subtitle">"What we fear doing most is usually what we most need to do." - Tim Ferriss</p>
        </header>

        <div class="what-if-section">
            <h2>What if I...</h2>
            <input type="text" class="what-if-input" id="what-if-input" placeholder="quit my job / started a business / moved to another country / ended this relationship...">
        </div>

        <div class="columns-container">
            <div class="column">
                <h3>1. Define</h3>
                <p class="column-subtitle">List your worst-case scenarios</p>
                <ol class="editor" contenteditable="true" id="define-editor"></ol>
            </div>

            <div class="column">
                <h3>2. Prevent</h3>
                <p class="column-subtitle">What can I do to prevent each scenario?</p>
                <ol class="editor" contenteditable="true" id="prevent-editor"></ol>
            </div>

            <div class="column">
                <h3>3. Repair</h3>
                <p class="column-subtitle">If the worst happens, how can I fix it?</p>
                <ol class="editor" contenteditable="true" id="repair-editor"></ol>
            </div>
        </div>

        <div class="instructions">
            <h3>How to Complete This Exercise:</h3>
            <ol>
                <li><strong>Define (Column 1):</strong> List 10-20 specific fears or worst-case scenarios. Be detailed and specific. What exactly could go wrong?</li>
                
                <li><strong>Prevent (Column 2):</strong> For each fear, write what you could do to prevent it or decrease its likelihood. Even a 1-2% reduction in probability is worth noting.</li>
                
                <li><strong>Repair (Column 3):</strong> If your fears came true, what could you do to repair the damage? Who could you ask for help? What actions could you take? Often you'll realize the "permanent" isn't so permanent.</li>
                
                <li><strong>Consider the Benefits:</strong> After completing the three columns, ask yourself: What might be the benefits of an attempt or partial success? Rate these 1-10.</li>
                
                <li><strong>Cost of Inaction:</strong> What is the cost of inaction? Emotionally, physically, financially, etc. in 6 months, 1 year, and 3 years? Often, this is the most important realization.</li>
            </ol>
        </div>

        <div class="export-section">
            <h3>Export Your Fear Setting</h3>
            <div class="export-buttons">
                <button class="export-btn" onclick="copyToClipboard(event)">Copy Table</button>
                <button class="export-btn" onclick="exportCSV()">Export CSV</button>
                <button class="export-btn" onclick="exportMarkdown()">Export Markdown</button>
                <button class="export-btn" onclick="exportDoc()">Export DOC</button>
                <button class="export-btn" onclick="exportPDF()">Export PDF</button>
            </div>
            <button class="reset-btn" onclick="resetAll(event)">Reset All</button>
        </div>

        <div class="intro">
            <h2>What is Fear Setting?</h2>
            <p><strong>Fear Setting</strong> is a powerful exercise created by Tim Ferriss, inspired by Stoic philosophy, particularly the practice of "premeditatio malorum" (premeditation of evils). Unlike goal setting, which focuses on positive outcomes, fear setting helps you clearly define and overcome the fears that paralyze you and prevent you from taking action.</p>
            
            <p>This exercise forces you to fully envision and write down your fears in detail. More importantly, it requires you to think about how you would prevent these scenarios and how you would repair the damage if they came to pass. Often, you'll find that your fears are either preventable or reversible, and the cost of inaction is far greater than the cost of action.</p>

            <p>Tim Ferriss credits this exercise with some of his most important life decisions, including extended travel, starting his first business, and taking "mini-retirements." He recommends doing this exercise quarterly or whenever facing major decisions.</p>

            <h3>The Origins and Philosophy</h3>
            <p>Fear setting emerged from Tim Ferriss's personal struggle with anxiety and decision paralysis. During a particularly dark period in 2004, he discovered Stoic philosophy, specifically Seneca's practice of premeditatio malorum. This ancient practice involves imagining the worst-case scenarios in detail to rob them of their power over us.</p>
            
            <p>The Stoics understood that our imagination often makes potential negative outcomes seem far worse than they actually are. By forcing ourselves to define these fears precisely, we often discover that they are either highly unlikely, preventable, or reversible. This realization frees us to take calculated risks that can transform our lives.</p>

            <h3>Why Fear Setting Works</h3>
            <p>Neuroscience research shows that undefined anxieties activate our amygdala (fear center) more intensely than well-defined concerns. When we articulate our fears clearly, we engage our prefrontal cortex - the rational planning center of our brain. This shift from emotional to analytical thinking is why fear setting is so effective.</p>
            
            <p>Additionally, by planning prevention and repair strategies, we transform from passive worriers into active problem-solvers. This sense of agency and control significantly reduces anxiety and increases our likelihood of taking positive action.</p>

            <h3>When to Use Fear Setting</h3>
            <p>Tim Ferriss recommends fear setting in several scenarios:</p>
            <ul style="margin-left: 30px; margin-bottom: 20px;">
                <li>Before making major life decisions (career changes, relationships, relocations)</li>
                <li>When you feel stuck or paralyzed by indecision</li>
                <li>Quarterly, as a regular practice to identify hidden fears holding you back</li>
                <li>When considering opportunities that excite but terrify you</li>
                <li>Before negotiating or having difficult conversations</li>
            </ul>

            <h3>How to Complete This Exercise</h3>
            <ol style="margin-left: 30px;">
                <li><strong>Define:</strong> List 10-20 worst-case scenarios if you take this action. Be specific and detailed. What exactly could go wrong?</li>
                
                <li><strong>Prevent:</strong> For each fear, write what you could do to prevent it or decrease its likelihood. Even a 1-2% reduction in probability is worth noting.</li>
                
                <li><strong>Repair:</strong> If your fears came true, what could you do to repair the damage? Who could you ask for help? What actions could you take? Often you'll realize the "permanent" isn't so permanent.</li>
                
                <li><strong>Consider the Benefits:</strong> After completing the three columns, ask yourself: What might be the benefits of an attempt or partial success? Rate these 1-10.</li>
                
                <li><strong>Cost of Inaction:</strong> What is the cost of inaction? Emotionally, physically, financially, etc. in 6 months, 1 year, and 3 years? Often, this is the most important realization.</li>
            </ol>

            <h3 style="margin-top: 30px;">Common Patterns in Fear Setting</h3>
            <p>After guiding thousands through this exercise, certain patterns emerge:</p>
            <ul style="margin-left: 30px; margin-bottom: 20px;">
                <li><strong>Financial fears</strong> are often exaggerated - most people overestimate how much money they need and underestimate their ability to earn</li>
                <li><strong>Social fears</strong> assume others care far more about our choices than they actually do</li>
                <li><strong>Professional fears</strong> frequently ignore the transferability of skills and the reality of career pivots</li>
                <li><strong>Relationship fears</strong> often neglect the damage of staying in unhealthy situations</li>
            </ul>

            <h3>Success Stories</h3>
            <p>Fear setting has helped countless individuals make life-changing decisions:</p>
            <ul style="margin-left: 30px; margin-bottom: 20px;">
                <li>Entrepreneurs who left stable jobs to start successful companies</li>
                <li>Professionals who negotiated significant raises or better positions</li>
                <li>Individuals who ended toxic relationships and found healthier ones</li>
                <li>People who took sabbaticals or "mini-retirements" that refreshed their careers</li>
                <li>Artists who pursued their passion despite financial concerns</li>
            </ul>

            <h3>Tips for Effective Fear Setting</h3>
            <p><strong>Be brutally honest:</strong> Don't sugarcoat your fears or hold back. The more honest you are, the more powerful the exercise.</p>
            
            <p><strong>Get specific:</strong> Vague fears like "I'll fail" aren't helpful. Define what failure looks like specifically.</p>
            
            <p><strong>Include timeframes:</strong> Some fears are about immediate consequences, others about long-term effects. Include both.</p>
            
            <p><strong>Consider reversibility:</strong> Many decisions that seem permanent are actually quite reversible. Note which ones are.</p>
            
            <p><strong>Don't rush:</strong> Give yourself at least 30-60 minutes for this exercise. Deep thinking takes time.</p>

            <h3>Beyond the Exercise</h3>
            <p>Fear setting is just the beginning. After completing it, Tim Ferriss recommends:</p>
            <ul style="margin-left: 30px; margin-bottom: 20px;">
                <li>Sharing your results with a trusted friend or mentor for perspective</li>
                <li>Setting a decision deadline to avoid endless analysis</li>
                <li>Taking small, reversible steps toward your goal to test your assumptions</li>
                <li>Revisiting your fear setting document when anxiety resurfaces</li>
                <li>Celebrating when you discover your fears were overblown</li>
            </ul>

            <h3>The Cost of Inaction</h3>
            <p>Perhaps the most powerful part of fear setting is calculating the cost of inaction. We often focus on what could go wrong if we act, but fail to consider what we lose by not acting. This includes:</p>
            <ul style="margin-left: 30px; margin-bottom: 20px;">
                <li><strong>Atrophy of ambition:</strong> Dreams deferred often become dreams abandoned</li>
                <li><strong>Regret accumulation:</strong> The weight of "what ifs" grows heavier with time</li>
                <li><strong>Opportunity cost:</strong> Time spent in suboptimal situations is time not spent growing</li>
                <li><strong>Confidence erosion:</strong> Each time we don't act on our convictions, we trust ourselves less</li>
            </ul>

            <h3>Fear Setting vs. Goal Setting</h3>
            <p>While goal setting asks "What do I want to achieve?", fear setting asks "What's stopping me?" Both are valuable, but fear setting often unlocks action where goal setting alone fails. Many people know what they want but are paralyzed by undefined fears. Fear setting bridges this gap between desire and action.</p>

            <h3>Making Fear Setting a Practice</h3>
            <p>To maximize the benefits of fear setting:</p>
            <ul style="margin-left: 30px; margin-bottom: 20px;">
                <li>Schedule quarterly fear setting sessions in your calendar</li>
                <li>Keep a fear setting journal to track patterns over time</li>
                <li>Share the practice with friends and do it together</li>
                <li>Review past fear settings to see how unfounded many fears were</li>
                <li>Use mini fear settings for smaller daily decisions</li>
            </ul>

            <h3>Resources for Deeper Learning</h3>
            <p>To deepen your understanding of fear setting and related practices:</p>
            <ul style="margin-left: 30px;">
                <li>Tim Ferriss's TED Talk: "Why you should define your fears instead of your goals"</li>
                <li>Seneca's "Letters from a Stoic" for the philosophical foundation</li>
                <li>"The 4-Hour Workweek" chapter on fear setting and comfort challenges</li>
                <li>"Tools of Titans" for examples of how successful people handle fear</li>
                <li>The Tim Ferriss Show podcast episodes on Stoicism and decision-making</li>
            </ul>
        </div>

        <footer>
            <p>Based on Tim Ferriss' Fear Setting exercise. Learn more at <a href="https://tim.blog/2017/05/15/fear-setting/" target="_blank">tim.blog</a></p>
            <p style="font-size: 0.8em; color: #999; margin-top: 10px;">This website is an independent implementation of the fear-setting methodology and is not affiliated with, endorsed by, or associated with Tim Ferriss or his companies.</p>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Initialize what-if input
        const whatIfInput = document.getElementById('what-if-input');
        const savedWhatIf = localStorage.getItem('fearSetting_whatIf');
        if (savedWhatIf) {
            whatIfInput.value = savedWhatIf;
        }
        
        whatIfInput.addEventListener('input', () => {
            localStorage.setItem('fearSetting_whatIf', whatIfInput.value);
        });

        // Initialize editors with localStorage
        const editors = ['define', 'prevent', 'repair'];
        
        // Function to update alignment colors
        function updateAlignmentColors() {
            editors.forEach(editorId => {
                const editor = document.getElementById(`${editorId}-editor`);
                const items = editor.getElementsByTagName('li');
                Array.from(items).forEach((li, index) => {
                    // Remove all alignment classes
                    for (let i = 1; i <= 10; i++) {
                        li.classList.remove(`aligned-${i}`);
                    }
                    // Add appropriate alignment class
                    const colorIndex = (index % 10) + 1;
                    li.classList.add(`aligned-${colorIndex}`);
                });
            });
        }
        
        editors.forEach(editorId => {
            const editor = document.getElementById(`${editorId}-editor`);
            
            // Load saved data
            const saved = localStorage.getItem(`fearSetting_${editorId}`);
            if (saved) {
                editor.innerHTML = saved;
            }
            
            // Save on input and update colors
            editor.addEventListener('input', () => {
                localStorage.setItem(`fearSetting_${editorId}`, editor.innerHTML);
                updateAlignmentColors();
            });
            
            // Handle Enter key for bullet points
            editor.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    document.execCommand('insertHTML', false, '<li></li>');
                    
                    // Move cursor to new bullet
                    const selection = window.getSelection();
                    const range = selection.getRangeAt(0);
                    const li = range.startContainer.parentElement;
                    if (li && li.tagName === 'LI') {
                        range.selectNodeContents(li);
                        range.collapse(false);
                        selection.removeAllRanges();
                        selection.addRange(range);
                    }
                    
                    // Update colors after adding new item
                    setTimeout(updateAlignmentColors, 10);
                }
            });
            
            // Ensure first item is a bullet when focusing on empty editor
            editor.addEventListener('focus', (e) => {
                if (!editor.querySelector('li') && editor.textContent.trim() === '') {
                    // Create first list item
                    const li = document.createElement('li');
                    editor.appendChild(li);
                    
                    // Place cursor in the new list item
                    requestAnimationFrame(() => {
                        const selection = window.getSelection();
                        const range = document.createRange();
                        range.selectNodeContents(li);
                        range.collapse(true);
                        selection.removeAllRanges();
                        selection.addRange(range);
                        updateAlignmentColors();
                    });
                }
            });
            
            // Prevent typing outside of list items
            editor.addEventListener('beforeinput', (e) => {
                if (e.inputType === 'insertText' || e.inputType === 'insertCompositionText') {
                    const selection = window.getSelection();
                    if (!selection.rangeCount) return;
                    
                    const range = selection.getRangeAt(0);
                    const container = range.startContainer;
                    
                    // Check if we're typing directly in the OL element
                    let isInListItem = false;
                    let node = container;
                    while (node && node !== editor) {
                        if (node.nodeName === 'LI') {
                            isInListItem = true;
                            break;
                        }
                        node = node.parentNode;
                    }
                    
                    if (!isInListItem) {
                        e.preventDefault();
                        // Create a new list item and insert the text
                        const li = document.createElement('li');
                        li.textContent = e.data || '';
                        editor.appendChild(li);
                        
                        // Place cursor at end of new item
                        const newRange = document.createRange();
                        newRange.selectNodeContents(li);
                        newRange.collapse(false);
                        selection.removeAllRanges();
                        selection.addRange(newRange);
                        
                        updateAlignmentColors();
                    }
                }
            });
            
            // Also handle paste events
            editor.addEventListener('paste', (e) => {
                const selection = window.getSelection();
                const range = selection.getRangeAt(0);
                const container = range.startContainer;
                
                // If pasting outside a list item, create one first
                if (container === editor || (container.parentElement === editor && container.nodeType === Node.TEXT_NODE)) {
                    e.preventDefault();
                    const text = e.clipboardData.getData('text/plain');
                    document.execCommand('insertHTML', false, `<li>${text}</li>`);
                    setTimeout(updateAlignmentColors, 10);
                }
            });
            
            // Remove the click handler entirely - let focus handler deal with empty editors
        });
        
        // Initial color update
        updateAlignmentColors();

        // Export functions
        function getEditorData() {
            const data = {
                whatIf: whatIfInput.value
            };
            editors.forEach(editorId => {
                const editor = document.getElementById(`${editorId}-editor`);
                const items = Array.from(editor.getElementsByTagName('li')).map(li => li.textContent.trim());
                data[editorId] = items.filter(item => item.length > 0);
            });
            return data;
        }

        function exportCSV() {
            const data = getEditorData();
            const maxLength = Math.max(data.define.length, data.prevent.length, data.repair.length);
            
            let csv = `"What if I: ${data.whatIf}"\n\n`;
            csv += 'Define,Prevent,Repair\n';
            for (let i = 0; i < maxLength; i++) {
                csv += `"${data.define[i] || ''}","${data.prevent[i] || ''}","${data.repair[i] || ''}"\n`;
            }
            
            downloadFile(csv, 'fear-setting.csv', 'text/csv');
        }

        function exportMarkdown() {
            const data = getEditorData();
            let md = '# Fear Setting Exercise\n\n';
            md += `*Date: ${new Date().toLocaleDateString()}*\n\n`;
            md += `## What if I: ${data.whatIf}\n\n`;
            
            md += '### 1. Define\n';
            data.define.forEach(item => md += `- ${item}\n`);
            
            md += '\n### 2. Prevent\n';
            data.prevent.forEach(item => md += `- ${item}\n`);
            
            md += '\n### 3. Repair\n';
            data.repair.forEach(item => md += `- ${item}\n`);
            
            downloadFile(md, 'fear-setting.md', 'text/markdown');
        }

        function exportDoc() {
            const data = getEditorData();
            let html = `
                <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
                <head><title>Fear Setting Exercise</title></head>
                <body>
                    <h1>Fear Setting Exercise</h1>
                    <p><i>Date: ${new Date().toLocaleDateString()}</i></p>
                    <h2>What if I: ${data.whatIf}</h2>
                    
                    <h3>1. Define</h3>
                    <ol>${data.define.map(item => `<li>${item}</li>`).join('')}</ol>
                    
                    <h3>2. Prevent</h3>
                    <ol>${data.prevent.map(item => `<li>${item}</li>`).join('')}</ol>
                    
                    <h3>3. Repair</h3>
                    <ol>${data.repair.map(item => `<li>${item}</li>`).join('')}</ol>
                </body>
                </html>
            `;
            
            const blob = new Blob([html], { type: 'application/msword' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'fear-setting.doc';
            a.click();
            URL.revokeObjectURL(url);
        }

        function exportPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const data = getEditorData();
            
            let yPosition = 20;
            
            // Title
            doc.setFontSize(20);
            doc.text('Fear Setting Exercise', 20, yPosition);
            yPosition += 10;
            
            doc.setFontSize(10);
            doc.text(`Date: ${new Date().toLocaleDateString()}`, 20, yPosition);
            yPosition += 10;
            
            doc.setFontSize(12);
            doc.text(`What if I: ${data.whatIf}`, 20, yPosition);
            yPosition += 15;
            
            // Sections
            const sections = [
                { title: '1. Define', items: data.define },
                { title: '2. Prevent', items: data.prevent },
                { title: '3. Repair', items: data.repair }
            ];
            
            sections.forEach(section => {
                doc.setFontSize(14);
                doc.text(section.title, 20, yPosition);
                yPosition += 10;
                
                doc.setFontSize(10);
                section.items.forEach(item => {
                    if (yPosition > 270) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    
                    const lines = doc.splitTextToSize(`• ${item}`, 170);
                    lines.forEach(line => {
                        doc.text(line, 25, yPosition);
                        yPosition += 5;
                    });
                    yPosition += 2;
                });
                
                yPosition += 10;
            });
            
            doc.save('fear-setting.pdf');
        }

        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }

        function copyToClipboard(event) {
            const button = event.target;
            const data = getEditorData();
            const maxLength = Math.max(data.define.length, data.prevent.length, data.repair.length);
            
            let table = `# Fear Setting: ${data.whatIf}\n\n`;
            table += `*Date: ${new Date().toLocaleDateString()}*\n\n`;
            table += '| # | Define | Prevent | Repair |\n';
            table += '|---|--------|---------|--------|\n';
            
            for (let i = 0; i < maxLength; i++) {
                const num = i + 1;
                const define = data.define[i] || '';
                const prevent = data.prevent[i] || '';
                const repair = data.repair[i] || '';
                table += `| ${num} | ${define} | ${prevent} | ${repair} |\n`;
            }
            
            navigator.clipboard.writeText(table).then(() => {
                // Visual feedback
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.backgroundColor = '#4a4a4a';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.backgroundColor = '#333';
                }, 2000);
            }).catch(err => {
                alert('Failed to copy to clipboard. Please try again.');
                console.error('Copy failed:', err);
            });
        }

        function resetAll(event) {
            const button = event.target;
            const confirmReset = confirm(
                'Are you sure you want to reset everything?\n\n' +
                'This will:\n' +
                '• Clear all your Define, Prevent, and Repair entries\n' +
                '• Clear your "What if I..." statement\n' +
                '• Remove all saved data\n\n' +
                'This action cannot be undone.'
            );
            
            if (confirmReset) {
                // Clear localStorage
                localStorage.removeItem('fearSetting_whatIf');
                localStorage.removeItem('fearSetting_define');
                localStorage.removeItem('fearSetting_prevent');
                localStorage.removeItem('fearSetting_repair');
                
                // Clear the input field
                whatIfInput.value = '';
                
                // Clear all editors
                editors.forEach(editorId => {
                    const editor = document.getElementById(`${editorId}-editor`);
                    editor.innerHTML = '';
                });
                
                // Update colors (will clear since lists are empty)
                updateAlignmentColors();
                
                // Visual feedback
                button.textContent = 'Reset Complete';
                
                setTimeout(() => {
                    button.textContent = 'Reset All';
                }, 2000);
            }
        }
    </script>
</body>
</html>